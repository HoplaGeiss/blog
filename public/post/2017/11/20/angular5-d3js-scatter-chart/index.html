
<!DOCTYPE html>
<html lang="en-gb">

    <head>

        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <meta property="og:title" content=" Angular 5 / d3.js - Scatter Chart &middot;  Gabriel Muller - JavaScript and Angular articles" />
        <meta property="og:site_name" content="Gabriel Muller - JavaScript and Angular articles" />
        <meta property="og:url" content="http://www.muller.tech/post/2017/11/20/angular5-d3js-scatter-chart/" />

    
        <meta property="og:type" content="article" />
        <meta property="og:article:published_time" content="2017-11-20T00:00:00Z" />
        <meta property="og:article:tag" content="angular5" />
        <meta property="og:article:tag" content="d3.js" />
        

        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@" />
        <meta name="twitter:creator" content="@" />
        <meta name="twitter:title" content="Angular 5 / d3.js - Scatter Chart" />
        <meta name="twitter:description" content="Create a scatter chart with angular5 and d3.js" />
        <meta name="twitter:url" content="http://www.muller.tech/post/2017/11/20/angular5-d3js-scatter-chart/" />
    

        <title> Angular 5 / d3.js - Scatter Chart &middot;  Gabriel Muller - JavaScript and Angular articles</title>

        <link rel="preload" href="/js/main.js" as="script" />
        <link rel="preload" href="/css/main.css" as="style" />

    
        <meta name="description" content="Create a scatter chart with angular5 and d3.js" />
    

    
        <meta name="p:domain_verify" content=""/>
    

        <meta name="HandheldFriendly" content="True" />
        <meta name="MobileOptimized" content="320" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        
        

    
        <link href="http://www.muller.tech/index.xml" rel="alternate" type="application/rss+xml" title="Gabriel Muller - JavaScript and Angular articles" />
    

    
        <link rel="canonical" href="http://www.muller.tech/post/2017/11/20/angular5-d3js-scatter-chart/" />


    
    <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "http://www.muller.tech/post/2017/11/20/angular5-d3js-scatter-chart/"
        },
        "headline": "Angular 5 / d3.js - Scatter Chart",
        "description": "Create a scatter chart with angular5 and d3.js",
        "author": {
            "@type": "Person",
            "name": "Gabriel Muller",
            "url": "http://profiles.google.com/?rel=author",
            "image": {
              "@type": "ImageObject",
              "url": "https:",
              "height": 80,
              "width": 80
            }
        },
        "publisher": {
          "@type": "Organization",
          "@id": "http://www.muller.tech/",
          "name": "Gabriel Muller - JavaScript and Angular articles",
          "url": "http://www.muller.tech/",
          "logo": {
            "@type": "ImageObject",
            "url": "https:",
            "height": 80,
            "width": 80
          }
        },
        "image": {
          "@type": "ImageObject",
          "url": "http://www.muller.tech/images/scatter-chart.png",
          "height": 133,
          "width": 200
        },
        "datePublished": "2017-11-20",
        "dateModified": "2017-11-20",
        "wordCount": 1036,
        "keywords": ["angular5","d3.js"]
    }
    </script>


    
    <script type="text/javascript">
    
    
      var disqus_shortname = 'mullertech';
      var disqus_identifier = 'http:\/\/www.muller.tech\/post\/2017\/11\/20\/angular5-d3js-scatter-chart\/';
      var disqus_title = 'Angular 5 \/ d3.js - Scatter Chart';
      var disqus_url = 'http:\/\/www.muller.tech\/post\/2017\/11\/20\/angular5-d3js-scatter-chart\/';
    
    </script>
    

    <style>
html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,figure,footer,header,main,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figure{margin:1em 40px}a{background-color:transparent;-webkit-text-decoration-skip:objects}img{border-style:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}@font-face{font-family:'Merriweather Sans';font-style:normal;font-weight:300;src:local("Merriweather Sans Light"),local(MerriweatherSans-Light),url(//fonts.gstatic.com/s/merriweathersans/v5/6LmGj5dOJopQKEkt88GowY_zIojJi0m4a5Z6tRh6itY.woff) format("woff")}@font-face{font-family:'Merriweather Sans';font-style:normal;font-weight:400;src:local("Merriweather Sans Regular"),local(MerriweatherSans-Regular),url(//fonts.gstatic.com/s/merriweathersans/v5/AKu1CjQ4qnV8MUltkAX3sL2aU247V0zTzydO4RoO9Ok.woff) format("woff")}@font-face{font-family:'Merriweather Sans';font-style:normal;font-weight:700;src:local("Merriweather Sans Bold"),local(MerriweatherSans-Bold),url(//fonts.gstatic.com/s/merriweathersans/v5/6LmGj5dOJopQKEkt88GowQfd-b-I5PxxcmB4_-MNcqw.woff) format("woff")}@font-face{font-family:'Merriweather Sans';font-style:normal;font-weight:800;src:local("Merriweather Sans ExtraBold"),local(MerriweatherSans-ExtraBold),url(//fonts.gstatic.com/s/merriweathersans/v5/6LmGj5dOJopQKEkt88GowWT7sFQ1Iz1BbpcuCPlgc9Q.woff) format("woff")}@font-face{font-family:'Merriweather Sans';font-style:italic;font-weight:300;src:local("Merriweather Sans Light Italic"),local(MerriweatherSans-LightItalic),url(//fonts.gstatic.com/s/merriweathersans/v5/nAqt4hiqwq3tzCecpgPmVX9UU5BmOJGkLxUCVv5VXdc.woff) format("woff")}@font-face{font-family:'Merriweather Sans';font-style:italic;font-weight:400;src:local("Merriweather Sans Italic"),local(MerriweatherSans-Italic),url(//fonts.gstatic.com/s/merriweathersans/v5/3Mz4hOHzs2npRMG3B1ascf0KIgDhPIHb_R-SWdtqte8.woff) format("woff")}@font-face{font-family:'Merriweather Sans';font-style:italic;font-weight:700;src:local("Merriweather Sans Bold Italic"),local(MerriweatherSans-BoldItalic),url(//fonts.gstatic.com/s/merriweathersans/v5/nAqt4hiqwq3tzCecpgPmVYM8pfYvjMoOxygpzLVILAs.woff) format("woff")}@font-face{font-family:'icons';src:url(/fonts/icons.eot?9273991);src:url(/fonts/icons.eot?9273991#iefix) format("embedded-opentype"),url(/fonts/icons.woff?9273991) format("woff"),url(/fonts/icons.ttf?9273991) format("truetype"),url(/fonts/icons.svg?9273991#icons) format("svg");font-weight:400;font-style:normal}[class^="icon-"]:before{font-family:"icons";font-style:normal;font-weight:400;speak:none;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-arrow-right:before{content:'\e807'}.icon-rss:before{content:'\e808'}body{font:300 1em / 1.5em 'Merriweather Sans',sans-serif;color:#595B66}a{color:inherit;text-decoration:none;font-weight:400}h1,h2{text-rendering:optimizeLegibility;color:#1F2026}h2 a{font-weight:inherit}h1{font-size:2em;line-height:1em;margin:2em 0 -.5em}h2{font-size:1.75em;line-height:1.143em;margin:2.286em 0 -.571em}p{margin:2em auto}i{font-weight:400;font-style:italic;color:#363740}img{display:block;max-width:100%;height:auto;margin:2.5em auto}body{background:#fff}.inner{max-width:48em;margin:0 auto;padding:0 1em}#wrapper{position:relative;box-sizing:border-box;width:100%;min-height:100vh;padding-bottom:6em;background:#F2F3F5}#push{transform:translate3d(0,0,0);transform-style:preserve-3d;opacity:1}#nav{position:relative;background:#fff;z-index:70;transform:translate3d(0,0,0);transform-style:preserve-3d;opacity:1}#nav:after{clear:both;content:'';display:table}#nav .nav-logo{float:left;height:2em;padding:1em;max-width:50%}#nav .nav-logo img{width:auto;max-width:none;height:2em;margin:0;border-radius:5px}#nav .nav-menu{float:right}#nav .nav-menu:after{clear:both;content:'';display:table}#nav .nav-menu a{display:block;width:1em;height:1em;line-height:1em;padding:1.5em;text-align:center;float:left}#nav .nav-menu a i:before{margin:auto}.overlay{display:none;position:fixed;left:0;top:0;width:100%;height:100%;z-index:80;display:none}.overlay:before{content:'';position:absolute;left:0;top:0;width:100%;height:100%;background:#1F2026;opacity:0;transform-style:preserve-3d}#header{position:relative;padding:4em 0}#header .inner{position:relative;z-index:2}#header .header-title{display:block;text-align:center}#header .header-name{font-weight:700;letter-spacing:-1px;display:block;line-height:1em;font-size:2em;text-decoration:none;color:#1F2026;padding:0;margin:0}#header.has-cover .header-name{color:#fff}#header .header-description{display:block;margin:1em auto 0;color:#9D9FA6;position:relative;font-weight:300}#header .header-description:after{content:'';position:absolute;height:1px;width:100px;margin-left:-50px;left:50%;top:-.5em;background:#D4D5D9}#header.has-cover .header-description{color:#fff}#header.has-cover .header-description:after{background:#fff}#header .header-cover{position:absolute;width:100%;height:100%;top:0;left:0;margin-top:-4em;padding:4em 0;background:no-repeat fixed center 100% / cover;z-index:1}#header .header-cover:before{content:'';position:absolute;width:100%;height:100%;left:0;top:0;background:rgba(0,0,0,0.2)}#header .header-cover:after{content:'';position:absolute;width:100%;left:0;bottom:0;border-bottom:4px solid #36D995}#footer{position:absolute;width:100%;left:0;bottom:0;font-size:.75em;line-height:1.334em;background:#1F2026;color:#737580;z-index:20;transform:translate3d(0,0,0);transform-style:preserve-3d;opacity:1}#footer a{color:#9D9FA6;font-weight:400}#footer .credits{text-align:center;font-size:.75em;line-height:1.334em;padding:2.667em;overflow:auto}#footer .credits span{display:block}#footer .credits .credits-theme{float:left}#footer .credits .credits-software{float:right}.post{position:relative;z-index:20}.post .post-image{display:block;margin:0;padding:0}.post .post-image img{display:block;width:100%;height:auto;margin:0;padding:0}.post .post-meta{display:block;font-size:.75em;line-height:1.334em;font-weight:400;margin-bottom:1.334em}.post .post-title{position:relative;color:#000;font-size:2em;line-height:1.375em;font-weight:800;text-indent:-1px;margin:.25em 0 .75em}.post .post-title:before{content:'';position:absolute;left:0;bottom:-.334em;width:1em;margin-bottom:-2px;border-bottom:4px solid #36D995}.post .post-title a{text-decoration:none;color:inherit;font-weight:inherit}#post-index{position:relative;max-width:1200px;margin:0 auto 4em;padding:.5em;z-index:10}@keyframes fade{0%{transform:translate3d(0,3em,0);opacity:0}100%{transform:translate3d(0,0,0);opacity:1}}.post-list{position:relative}.post-list .post{float:left;width:33.3%;transform:translate3d(0,3em,0);transform-style:preserve-3d;opacity:0;animation:fade ease-out .5s forwards;animation-delay:1.4s}@media only screen and (max-width: 50em){.post-list .post{width:49.9%}}@media only screen and (max-width: 30em){.post-list .post{width:100%;float:none}}.post-list .post:nth-child(1){animation-delay:.1s}.post-list .post:nth-child(2){animation-delay:.2s}.post-list .post:nth-child(3){animation-delay:.3s}.post-list .post:nth-child(4){animation-delay:.4s}.post-list .post:nth-child(5){animation-delay:.5s}.post-list .post:nth-child(6){animation-delay:.6s}.post-list .post:nth-child(7){animation-delay:.7s}.post-list .post:nth-child(8){animation-delay:.8s}.post-list .post:nth-child(9){animation-delay:.9s}.post-list .post .inner{padding:2em;margin:.5em;max-width:none;background:#fff;box-sizing:border-box;transform:scale(1);transform-style:preserve-3d}@media only screen and (max-width: 50em){.post-list .post .inner{padding:1em}}.post-list .post .post-link{position:absolute;left:0;top:0;width:100%;height:100%;z-index:10}.post-list .post .post-image{position:relative;margin:-2em -2em 0;overflow:hidden;background:#36D995}@media only screen and (max-width: 50em){.post-list .post .post-image{margin:-1em -1em 0}}.post-list .post .post-image img{transform:scale(1);transform-style:preserve-3d;opacity:1}.post-list .post .post-image:after{content:'';position:absolute;left:-5%;bottom:-2.5em;width:110%;height:4em;background:#fff;border-top:4px solid #36D995;box-shadow:0 0 2em rgba(0,0,0,0.2);transform:rotate(5deg)}.post-list .post .post-title{font-size:1.5em;line-height:1.167em}.post-list .post .post-excerpt{margin:0}.post-list .post .post-more{display:block;margin-top:1.5em}.post-list .post .post-more a{display:inline-block;font-size:.875em;line-height:1.143em;font-weight:400;color:#363740}.post-list .post .post-more a i{color:#2DB77E}.pagination{min-height:3em;margin:4em auto 2em;padding:0;position:relative}.pagination .pagination-item{position:relative;display:block;height:3em;line-height:3em;padding:0 1em;text-align:center;text-decoration:none;font-weight:700;color:#363740;border:1px solid #36D995;border-radius:4em;z-index:60}.pagination .pagination-item i{position:relative}@media only screen and (max-width: 30em){.pagination .pagination-item{width:4em;height:4em;line-height:4em;margin-top:-.5em;padding:0!important}.pagination .pagination-item i{font-size:1.5em}.pagination .pagination-item>span{display:none}}.pagination .pagination-prev{float:right}.pagination .pagination-prev i{right:-.05em}.pagination .pagination-info{display:block;left:0;top:0;height:3em;line-height:3em;position:absolute;text-align:center;width:100%;z-index:50;color:#9D9FA6}#loader-wrapper{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000}#loader{display:block;position:relative;left:50%;top:50%;width:150px;height:150px;margin:-75px 0 0 -75px;border-radius:50%;border:3px solid transparent;border-top-color:#36D995;animation:spin 2s linear infinite}#loader:before{content:"";position:absolute;top:5px;left:5px;right:5px;bottom:5px;border-radius:50%;border:3px solid transparent;border-top-color:#2DB77E;animation:spin 3s linear infinite}#loader:after{content:"";position:absolute;top:15px;left:15px;right:15px;bottom:15px;border-radius:50%;border:3px solid transparent;border-top-color:#D4D5D9;animation:spin 1.5s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
</style>


    </head>
    <body class="home-template">
      <div id="loader-wrapper">
        <div id="loader"></div>
      </div>
      <section id="wrapper" style="display: none;">
        <div id="ajax-container">
          <nav id="nav" class="nav">
            <div class="nav-logo">
              <a href="http://www.muller.tech/">
      			  
      			  	<img src="/images/logo.png" alt="Logo"/>
      			  
              </a>
            </div>
            <div class="nav-menu">
              <a class="rss" href="">
                <i class="icon-rss"></i>
              </a>
                
                <a class="menu" data-action="toc" data-target="toc"><i class="icon-location"></i></a>
                
                
            </div>
          </nav>


<main class="content" role="main">
	<article class="post">
		<div class="inner">

			<div id="push">

  			<header class="post-header">
  				<span class="post-meta">
						<span class="post-date">20 Nov 2017</span> <span class="reading-time">| <span class="estimated-reading-time">5 min.</span> (<span class="word-count">1036</span> words)</span></span>
  				</span>
  				<div class="clear"></div>
  				<h1 class="post-title">Angular 5 / d3.js - Scatter Chart</h1>
  			</header>

  			<section class="post-content">
  				

<p>In this post you will learn how to create a scatter chart with angular5 and d3.js.</p>

<p>Take a look at the demo:
<a href="http://www.muller.tech/hopla-scatter-chart/">http://www.muller.tech/hopla-scatter-chart/</a></p>

<p>If you are in a hurry, you can checkout the source code here: <a href="https://github.com/HoplaGeiss/hopla-scatter-chart">https://github.com/HoplaGeiss/hopla-scatter-chart</a></p>

<p>Now, let&rsquo;s dive in!</p>

<h3 id="component-skeleton">Component skeleton</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Component</span>, <span style="color:#a6e22e">ElementRef</span>, <span style="color:#a6e22e">ViewChild</span>, <span style="color:#a6e22e">OnInit</span>, <span style="color:#a6e22e">Input</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;@angular/core&#39;</span>;
<span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">as</span> <span style="color:#a6e22e">d3</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;d3&#39;</span>;

<span style="color:#66d9ef">@Component</span>({
  <span style="color:#a6e22e">selector</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;app-scatter-chart&#39;</span>,
  <span style="color:#a6e22e">styleUrls</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;./scatter-chart.component.scss&#39;</span>],
  <span style="color:#a6e22e">template</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`
</span><span style="color:#e6db74">    &lt;div class=&#39;scatter-chart&#39; #scatterChartContainer&gt;
</span><span style="color:#e6db74">      &lt;div class=&#39;tooltip&#39;&gt;
</span><span style="color:#e6db74">        &lt;span class=&#39;highlight&#39;&gt;Device discovered:&lt;/span&gt; {{node?.value}}
</span><span style="color:#e6db74">      &lt;/div&gt;
</span><span style="color:#e6db74">    &lt;/div&gt;
</span><span style="color:#e6db74">  `</span>
})
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ScatterChartComponent</span> <span style="color:#66d9ef">implements</span> <span style="color:#a6e22e">OnInit</span> {
  <span style="color:#66d9ef">@ViewChild</span>(<span style="color:#e6db74">&#39;scatterChartContainer&#39;</span>) <span style="color:#66d9ef">private</span> <span style="color:#a6e22e">chartContainer</span>: <span style="color:#66d9ef">ElementRef</span>;
  <span style="color:#66d9ef">@Input</span>() <span style="color:#66d9ef">private</span> <span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">Array</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">any</span><span style="color:#f92672">&gt;</span>;
  <span style="color:#66d9ef">@Input</span>() <span style="color:#a6e22e">monthsAgo</span>: <span style="color:#66d9ef">number</span>;

  <span style="color:#a6e22e">hostElement</span>: <span style="color:#66d9ef">any</span>;

  <span style="color:#a6e22e">margin</span>: <span style="color:#66d9ef">any</span>;
  <span style="color:#a6e22e">width</span>: <span style="color:#66d9ef">number</span>;
  <span style="color:#a6e22e">height</span>: <span style="color:#66d9ef">number</span>;
  <span style="color:#a6e22e">groupWidth</span>: <span style="color:#66d9ef">number</span>;
  <span style="color:#a6e22e">groupHeight</span>: <span style="color:#66d9ef">number</span>;

  <span style="color:#a6e22e">dotColours</span>: <span style="color:#66d9ef">any</span>;
  <span style="color:#a6e22e">labelColours</span>: <span style="color:#66d9ef">any</span>;

  <span style="color:#a6e22e">formatTime</span>: <span style="color:#66d9ef">any</span>;

  <span style="color:#a6e22e">minDt</span>: <span style="color:#66d9ef">any</span>;
  <span style="color:#a6e22e">maxDt</span>: <span style="color:#66d9ef">any</span>;

  <span style="color:#a6e22e">xAxisScale</span>: <span style="color:#66d9ef">any</span>;
  <span style="color:#a6e22e">xAxis</span>: <span style="color:#66d9ef">any</span>;
  <span style="color:#a6e22e">gX</span>: <span style="color:#66d9ef">any</span>;

  <span style="color:#a6e22e">groupCircles</span>: <span style="color:#66d9ef">any</span>;
  <span style="color:#a6e22e">tooltip</span>: <span style="color:#66d9ef">any</span>;
  <span style="color:#a6e22e">circles</span>: <span style="color:#66d9ef">any</span>;
  <span style="color:#a6e22e">outerCircle</span>: <span style="color:#66d9ef">any</span>;
  <span style="color:#a6e22e">innerCircle</span>: <span style="color:#66d9ef">any</span>;

  <span style="color:#a6e22e">zoom</span>: <span style="color:#66d9ef">any</span>;

  <span style="color:#a6e22e">svg</span>: <span style="color:#66d9ef">any</span>;
  <span style="color:#a6e22e">view</span>: <span style="color:#66d9ef">any</span>;

  <span style="color:#a6e22e">node</span>: <span style="color:#66d9ef">any</span>;

  <span style="color:#66d9ef">constructor</span>(
    <span style="color:#66d9ef">private</span> <span style="color:#a6e22e">elementRef</span>: <span style="color:#66d9ef">ElementRef</span>
  ) {}
}</code></pre></div>
<p>Not so much going on here. In the template we define the containers for the svg and for the tooltip. In the component itself we just define loads and loads of variables.</p>

<h3 id="initialization">Initialization</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#a6e22e">ngOnInit() {</span>
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">hostElement</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">chartContainer</span>.<span style="color:#a6e22e">nativeElement</span>;
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tooltip</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">elementRef</span>.<span style="color:#a6e22e">nativeElement</span>.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;.tooltip&#39;</span>);

  <span style="color:#75715e">// Width &amp; Height
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">margin</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">top</span>: <span style="color:#66d9ef">0</span>, <span style="color:#a6e22e">right</span>: <span style="color:#66d9ef">0</span>, <span style="color:#a6e22e">bottom</span>: <span style="color:#66d9ef">30</span>, <span style="color:#a6e22e">left</span>: <span style="color:#66d9ef">0</span>};

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">hostElement</span>.<span style="color:#a6e22e">offsetWidth</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">margin</span>.<span style="color:#a6e22e">left</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">margin</span>.<span style="color:#a6e22e">right</span>;
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">hostElement</span>.<span style="color:#a6e22e">offsetHeight</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">margin</span>.<span style="color:#a6e22e">top</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">margin</span>.<span style="color:#a6e22e">bottom</span>;

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupWidth</span> <span style="color:#f92672">=</span>  <span style="color:#ae81ff">200</span>;

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupHeight</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">height</span> <span style="color:#960050;background-color:#1e0010">/ this.data.length;</span>

  <span style="color:#75715e">// Colours
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">dotColours</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">scaleOrdinal</span>().<span style="color:#a6e22e">range</span>([<span style="color:#e6db74">&#39;#3FBBA2&#39;</span>, <span style="color:#e6db74">&#39;#904FAD&#39;</span>]);
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">labelColours</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">scaleOrdinal</span>().<span style="color:#a6e22e">range</span>([<span style="color:#e6db74">&#39;#049372&#39;</span>, <span style="color:#e6db74">&#39;#674172&#39;</span>]);

  <span style="color:#75715e">// Formating
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">formatTime</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">timeFormat</span>(<span style="color:#e6db74">&#39;%e %B&#39;</span>);

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">minDt</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">addMonths</span>(<span style="color:#66d9ef">new</span> Date(), <span style="color:#f92672">-</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">monthsAgo</span>);
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">maxDt</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date();

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">render</span>();
}</code></pre></div>
<p>In this init method, we already have more stuff going on! We instantiate the host element, the tooltip, the dot colours, the label colours. We also define the time formats and the beginning and the end of the x scale.</p>

<h3 id="render-the-svg">Render the svg</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#a6e22e">render</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xAxisScale</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">scaleTime</span>()
      .<span style="color:#a6e22e">domain</span>([<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">minDt</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">maxDt</span>]) <span style="color:#75715e">// Defines min and max of the x axis
</span><span style="color:#75715e"></span>      .<span style="color:#a6e22e">range</span>([<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupWidth</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">width</span>]);  <span style="color:#75715e">// Defines where the x axus label begin and end
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xAxis</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">axisBottom</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xAxisScale</span>)
      .<span style="color:#a6e22e">tickSize</span>(<span style="color:#f92672">-</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">10</span>); <span style="color:#75715e">// Defines the height of the vertical ligne above the x-axis
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">zoom</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">zoom</span>()
      .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;zoom&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">zoomFn</span>);

    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">svg</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">select</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">hostElement</span>)
      .<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;svg&#39;</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;width&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">margin</span>.<span style="color:#a6e22e">left</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">margin</span>.<span style="color:#a6e22e">right</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;height&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">margin</span>.<span style="color:#a6e22e">top</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">margin</span>.<span style="color:#a6e22e">bottom</span>)
      .<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;g&#39;</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;transform&#39;</span>, <span style="color:#e6db74">&#39;translate(&#39;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">margin</span>.<span style="color:#a6e22e">left</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;,&#39;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">margin</span>.<span style="color:#a6e22e">top</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;)&#39;</span>)
      .<span style="color:#a6e22e">call</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">zoom</span>);

    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">view</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">svg</span>
      .<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;defs&#39;</span>)
      .<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;clipPath&#39;</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;chart-content&#39;</span>)
      .<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;rect&#39;</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;x&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupWidth</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;y&#39;</span>, <span style="color:#ae81ff">0</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;height&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">height</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;width&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupWidth</span>);

    <span style="color:#75715e">// Rectangle with data
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">svg</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;rect&#39;</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;class&#39;</span>, <span style="color:#e6db74">&#39;chart-bounds&#39;</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;x&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupWidth</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;y&#39;</span>, <span style="color:#ae81ff">0</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;height&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">height</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;width&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupWidth</span>);

    <span style="color:#75715e">// Rectangle with groups
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">svg</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;rect&#39;</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;class&#39;</span>, <span style="color:#e6db74">&#39;group-bounds&#39;</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;x&#39;</span>, <span style="color:#ae81ff">0</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;y&#39;</span>, <span style="color:#ae81ff">0</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;height&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">height</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;width&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupWidth</span>);

    <span style="color:#75715e">// Dates of the x axis
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">gX</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">svg</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;g&#39;</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;class&#39;</span>, <span style="color:#e6db74">&#39;x axis&#39;</span>)
      .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;transform&#39;</span>, <span style="color:#e6db74">&#39;translate(0,&#39;</span> <span style="color:#f92672">+</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">height</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">10</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;)&#39;</span>)
      .<span style="color:#a6e22e">call</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xAxis</span>);

    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">drawBorders</span>();
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">createHorizontalSectionLines</span>();
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">createSectionLabels</span>();
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">createCircles</span>();
  }</code></pre></div>
<p>Here is where the magic happens. We create and svg, we put in place elements to allow panning and zooming, we define the zones where the labels and the data will be displayed, we put in place the x-axis and to finish we call the other methods to draw the borders, create the section lines, create the section labels and finally create the circles.</p>

<h3 id="other-methods">Other methods</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#a6e22e">createSectionLabels</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">svg</span>.<span style="color:#a6e22e">selectAll</span>(<span style="color:#e6db74">&#39;.group-label&#39;</span>)
    .<span style="color:#a6e22e">data</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">data</span>)
    .<span style="color:#a6e22e">enter</span>()
    .<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;text&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;class&#39;</span>, <span style="color:#e6db74">&#39;group-label&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;x&#39;</span>, <span style="color:#ae81ff">0</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;y&#39;</span>, (<span style="color:#a6e22e">d</span>, <span style="color:#a6e22e">i</span>) <span style="color:#f92672">=&gt;</span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupHeight</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupHeight</span> <span style="color:#960050;background-color:#1e0010">/ 2 + 5.5)</span>
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;dx&#39;</span>, <span style="color:#e6db74">&#39;0.5em&#39;</span>).<span style="color:#a6e22e">text</span>(<span style="color:#a6e22e">d</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">label</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;fill&#39;</span>, <span style="color:#a6e22e">d</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">labelColours</span>(<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">label</span>));
}

<span style="color:#a6e22e">createHorizontalSectionLines</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">svg</span>.<span style="color:#a6e22e">selectAll</span>(<span style="color:#e6db74">&#39;.group-section&#39;</span>)
    .<span style="color:#a6e22e">data</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">data</span>)
    .<span style="color:#a6e22e">enter</span>()
    .<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;line&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;class&#39;</span>, <span style="color:#e6db74">&#39;group-section&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;x1&#39;</span>, <span style="color:#ae81ff">0</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;x2&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">width</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;y1&#39;</span>,  (<span style="color:#a6e22e">d</span>, <span style="color:#a6e22e">i</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupHeight</span> <span style="color:#f92672">*</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>))
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;y2&#39;</span>, (<span style="color:#a6e22e">d</span>, <span style="color:#a6e22e">i</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupHeight</span> <span style="color:#f92672">*</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>));
}

<span style="color:#a6e22e">createCircles</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
  <span style="color:#75715e">// Create groups of items with different colours
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupCircles</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">svg</span>.<span style="color:#a6e22e">selectAll</span>(<span style="color:#e6db74">&#39;.group-dot-item&#39;</span>)
    .<span style="color:#a6e22e">data</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">data</span>)
    .<span style="color:#a6e22e">enter</span>()
    .<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;g&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;clip-path&#39;</span>, <span style="color:#e6db74">&#39;url(#chart-content)&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;class&#39;</span>, <span style="color:#e6db74">&#39;item&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;transform&#39;</span>, (<span style="color:#a6e22e">d</span>, <span style="color:#a6e22e">i</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;translate(0, &#39;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupHeight</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;)&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;fill&#39;</span>, <span style="color:#a6e22e">d</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">dotColours</span>(<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">label</span>))
    .<span style="color:#a6e22e">selectAll</span>(<span style="color:#e6db74">&#39;.dot&#39;</span>)
    .<span style="color:#a6e22e">data</span>(<span style="color:#a6e22e">d</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">data</span>).<span style="color:#a6e22e">enter</span>();

  <span style="color:#75715e">// Group the outer and inner circle together
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">circles</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupCircles</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;g&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;class&#39;</span>, <span style="color:#e6db74">&#39;circle&#39;</span>)
    .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;mouseover&#39;</span>, <span style="color:#a6e22e">node</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">mouseOverFn</span>(<span style="color:#a6e22e">node</span>))
    .<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;mouseout&#39;</span>, <span style="color:#a6e22e">node</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">mouseOutFn</span>());

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">outerCircle</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">circles</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;circle&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;class&#39;</span>, <span style="color:#e6db74">&#39;dot&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;cx&#39;</span>, <span style="color:#a6e22e">d</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xAxisScale</span>(<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">time</span>))
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;cy&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupHeight</span> <span style="color:#960050;background-color:#1e0010">/ 2)</span>
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;r&#39;</span>, <span style="color:#ae81ff">7</span>);

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">innerCircle</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">circles</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;circle&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;class&#39;</span>, <span style="color:#e6db74">&#39;inner-circle&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;cx&#39;</span>, <span style="color:#a6e22e">d</span> <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xAxisScale</span>(<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">time</span>))
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;cy&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupHeight</span> <span style="color:#960050;background-color:#1e0010">/ 2)</span>
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;r&#39;</span>, <span style="color:#ae81ff">3</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;fill&#39;</span>, <span style="color:#e6db74">&#39;white&#39;</span>);
}

<span style="color:#a6e22e">mouseOverFn</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">node</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">node</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">node</span>;

  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tooltip</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">visibility</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;visible&#39;</span>;
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tooltip</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">opacity</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.9</span>;
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tooltip</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">top</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">pageY</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">35</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px&#39;</span>;
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tooltip</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">left</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">pageX</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">35</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px&#39;</span>;
}

<span style="color:#a6e22e">mouseOutFn</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tooltip</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">visibility</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hidden&#39;</span>;
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">tooltip</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">opacity</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
}

<span style="color:#a6e22e">zoomFn</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
  <span style="color:#75715e">// Transform the xAxis
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">gX</span>.<span style="color:#a6e22e">call</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xAxis</span>.<span style="color:#a6e22e">scale</span>(<span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">transform</span>.<span style="color:#a6e22e">rescaleX</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xAxisScale</span>)));

  <span style="color:#75715e">// Translate circle on the X axis
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">newXScale</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">transform</span>.<span style="color:#a6e22e">rescaleX</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">xAxisScale</span>);
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">innerCircle</span>.<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;cx&#39;</span>, <span style="color:#a6e22e">d</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">newXScale</span>(<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">time</span>));
  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">outerCircle</span>.<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;cx&#39;</span>, <span style="color:#a6e22e">d</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">newXScale</span>(<span style="color:#a6e22e">d</span>.<span style="color:#a6e22e">time</span>));
}

<span style="color:#a6e22e">addMonths</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">date</span>, <span style="color:#a6e22e">months</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#a6e22e">date</span>.<span style="color:#a6e22e">setMonth</span>(<span style="color:#a6e22e">date</span>.<span style="color:#a6e22e">getMonth</span>() <span style="color:#f92672">+</span> <span style="color:#a6e22e">months</span>);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">date</span>;
}

<span style="color:#a6e22e">drawBorders</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
  <span style="color:#75715e">// left border
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">svg</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;line&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;class&#39;</span>, <span style="color:#e6db74">&#39;border&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;y1&#39;</span>, <span style="color:#ae81ff">0</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;y2&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">height</span>);

  <span style="color:#75715e">// right border
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">svg</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;line&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;class&#39;</span>, <span style="color:#e6db74">&#39;border&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;x1&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">width</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;x2&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">width</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;y1&#39;</span>, <span style="color:#ae81ff">0</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;y2&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">height</span>);

  <span style="color:#75715e">// top border
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">svg</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;line&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;class&#39;</span>, <span style="color:#e6db74">&#39;border&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;x1&#39;</span>, <span style="color:#ae81ff">0</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;x2&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">width</span>);

  <span style="color:#75715e">// Line between groups label on the left and plot ( make it thicker)
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">svg</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;line&#39;</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;x1&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupWidth</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;x2&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">groupWidth</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;y1&#39;</span>, <span style="color:#ae81ff">0</span>)
    .<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;y2&#39;</span>, <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">height</span>);
}</code></pre></div>
<p>I let you go through this method, they are fairly straightforward.</p>

<h3 id="data-service">Data service</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Injectable</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;@angular/core&#39;</span>;

<span style="color:#66d9ef">@Injectable</span>()
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ScatterDataService</span> {
  <span style="color:#a6e22e">generateData</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">num</span>: <span style="color:#66d9ef">number</span>) <span style="color:#f92672">=&gt;</span> {
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">results</span> <span style="color:#f92672">=</span> [];
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">booleans</span> <span style="color:#f92672">=</span> [<span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">false</span>];

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> Math.<span style="color:#a6e22e">floor</span>(<span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#a6e22e">num</span>); <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> {
        <span style="color:#a6e22e">id</span>: <span style="color:#66d9ef">i</span>,
        <span style="color:#a6e22e">singleRun</span>: <span style="color:#66d9ef">booleans</span>[Math.<span style="color:#a6e22e">floor</span>(Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span>)],
        <span style="color:#a6e22e">startDateUtc</span>: <span style="color:#66d9ef">new</span> Date(<span style="color:#ae81ff">2017</span>, Math.<span style="color:#a6e22e">floor</span>(Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#ae81ff">12</span>), Math.<span style="color:#a6e22e">floor</span>(Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#ae81ff">25</span>)),
        <span style="color:#a6e22e">totalDevicesFound</span>: <span style="color:#66d9ef">Math.floor</span>(<span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> <span style="color:#ae81ff">10</span>)
      };

      <span style="color:#a6e22e">results</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">result</span>);
    }

    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">results</span>;
  }

  <span style="color:#a6e22e">parseData</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">discoveries</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">single</span> <span style="color:#f92672">=</span> [];
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">periodic</span> <span style="color:#f92672">=</span> [];

    <span style="color:#a6e22e">discoveries</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">discovery</span> <span style="color:#f92672">=&gt;</span> {
      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">discovery</span>.<span style="color:#a6e22e">singleRun</span>) {
        <span style="color:#a6e22e">single</span>.<span style="color:#a6e22e">push</span>({
          <span style="color:#a6e22e">time</span>: <span style="color:#66d9ef">discovery.startDateUtc</span>,
          <span style="color:#a6e22e">value</span>: <span style="color:#66d9ef">discovery.totalDevicesFound</span>
        });
      } <span style="color:#66d9ef">else</span> {
        <span style="color:#a6e22e">periodic</span>.<span style="color:#a6e22e">push</span>({
          <span style="color:#a6e22e">time</span>: <span style="color:#66d9ef">discovery.startDateUtc</span>,
          <span style="color:#a6e22e">value</span>: <span style="color:#66d9ef">discovery.totalDevicesFound</span>
        });
      }
    });

    <span style="color:#66d9ef">return</span> [
      { <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Periodic&#39;</span>, <span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">periodic</span> },
      { <span style="color:#a6e22e">label</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Single&#39;</span>, <span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">single</span> }
    ];
  }
}</code></pre></div>
<p>I split the service in two methods, one to generate raw data and one to parse it in a format optimized for the use in our scatter chart. As you can see, the data is placed within the data attribute of one of our two objects in function of whether they are periodic and single.</p>

<p>Happy plotting! Have a look at the source code here: <a href="https://github.com/HoplaGeiss/hopla-scatter-chart">https://github.com/HoplaGeiss/hopla-scatter-chart</a></p>

  			</section>

  			<footer class="post-footer">
  				<div class="post-tags">
            
            
                <a href="http://www.muller.tech/tags/angular5/">angular5</a>
            
                <a href="http://www.muller.tech/tags/d3.js/">d3.js</a>
            
            
  				</div>
  				
  			</footer>

  			<aside class="post-comments">
    
    
    <div id="disqus_thread"></div>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
    
</aside>


			</div>

			<nav class="post-nav">
				
					<a class="post-nav-item post-nav-next" href="http://www.muller.tech/post/2017/11/20/angular5-d3js-force-directed-chart/">
						<section class="post-nav-teaser">
							<span class="post-nav-icon"><i class="icon-arrow-left"></i></span>
							<span class="post-nav-info">
								<h4 class="post-nav-title">Angular 5 / d3.js - Force Directed Chart</h4>
								<p class="post-nav-excerpt">Create a force directed chart with angular5 and d3.js&hellip;</p>
							</span>
						</section>
					</a>
				
				
					<a class="post-nav-item post-nav-prev" href="http://www.muller.tech/post/2017/11/13/angular5-d3js-pie-chart/">
						<section class="post-nav-teaser">
							<span class="post-nav-icon"><i class="icon-arrow-right"></i></span>
							<span class="post-nav-info">
								<h4 class="post-nav-title">Angular 5 / d3.js - Pie Chart</h4>
								<p class="post-nav-excerpt">Create a dynamic and resizable pie chart with angular5 and d3.js&hellip;</p>
							</span>
						</section>
					</a>
				
				<div class="clear"></div>
			</nav>

		</div>
	</article>
</main>

<div id="body-class" style="display: none;"></div>
<footer id="footer">
	<section class="credits">
		
	</section>

	<div id="sig" style="position: absolute; font-family: Helvetica, Verdana, Arial, Sans-Serif; font-size: 12px; color: #999999; bottom: 0; left: calc(50% - 145px);">
	  <div style="position: relative; display: inline-block;">
	    <span style="line-height: 30px;">
	      <div style="display: inline-block; float: left;">
	        <span style="font-weight: bold;">Gabriel Muller</span> - Full Stack Developer |
	      </div>

	      <a target="_blank" href="https://uk.linkedin.com/in/mullergab" style="position: relative;display: inline-block; text-decoration:none; float: left">
	        <img src="http://www.muller.tech/images/linkedin.png" alt="linkedin" style="width: 20px; padding: 5px 10px; margin:0" />
	      </a>
	      <span style="float: left"> | </span>
	      <a target="_blank" href="https://github.com/hoplageiss" style="position: relative;display: inline-block; text-decoration:none; float: left">
	        <img src="http://www.muller.tech/images/github.png" alt="github" style="width: 20px; padding: 5px 10px; margin:0"/>
	      </a>
	    </span>
	  </div>
	</div>
</footer>


<div id="tocMenu" data-target="toc">
    <div class="menu-header">
        <span class="menu-label">Menu</span>
        <a class="menu-close" data-action="toc" data-target="toc"></a>
    </div>
    <div id="toc" class="menu-list">
        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#component-skeleton">Component skeleton</a></li>
<li><a href="#initialization">Initialization</a></li>
<li><a href="#render-the-svg">Render the svg</a></li>
<li><a href="#other-methods">Other methods</a></li>
<li><a href="#data-service">Data service</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>


<div class="overlay"></div>
</div>
</section>

<script async src="/js/main.js"></script>



<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-69583716-1', 'auto');
ga('send', 'pageview');
</script>




<noscript><link rel="stylesheet" href="/css/main.css"></noscript>
</body>
</html>

